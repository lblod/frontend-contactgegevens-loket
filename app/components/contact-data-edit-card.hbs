<EditCard @containsRequiredFields={{true}}>
  <:title>{{yield to="title"}}</:title>
  <:card as |Card|>
    <Card.Columns>
      <:left as |Item|>
        <AuAddressSearch
          @id="new-address-search"
          @errorMessage={{this.addressError}}
          @warningMessage={{this.addressWarning}}
          @initialMode="automatic"
          @itemComponent={{Item}}
          @address={{@address}}
          @onChange={{this.handleAddressUpdate}}
        />
      </:left>
      <:right as |Item|>

        <Item
          @required={{true}}
          @labelFor={{concat @id "-telPrimary"}}
          @errorMessage={{@errorMessage.telephonePrimary}}
          @warningMessage={{@warningMessage.telephonePrimary}}
        >
          <:label>Primair telefoonnummer</:label>
          <:content as |hasError|>
            <TrimInput
              @width="block"
              @value={{tel-format @primaryContact.telephone}}
              @onUpdate={{fn (mut @primaryContact.telephone)}}
              @error={{hasError}}
              @warning={{unless @errorMessage @warningMessage}}
              @id={{concat @id "-telPrimary"}}
              type="tel"
              {{!-- {{on "focusout" (fn @clearValidationError "telephonePrimary")}} --}}
            />
            {{#if @warningMessage}}
              {{#if (has-block "warning")}}
                {{yield @warningMessage to="warning"}}
              {{else}}
                <AuHelpText
                  @warning={{true}}
                >{{@warningMessage.telephonePrimary}}</AuHelpText>
              {{/if}}
            {{/if}}
          </:content>
          <:helpText>
            {{help-text "phone-number"}}
          </:helpText>
        </Item>
        <Item
          @labelFor={{concat @id "-telSecondary"}}
          @errorMessage={{@errorMessage.telephoneSecondary}}
          @warningMessage={{@warningMessage.telephoneSecondary}}
        >
          <:label>Secundair telefoonnummer</:label>
          <:content as |hasError|>
            <TrimInput
              @width="block"
              @value={{tel-format @secondaryContact.telephone}}
              @onUpdate={{fn (mut @secondaryContact.telephone)}}
              @warning={{unless @errorMessage @warningMessage}}
              @error={{hasError}}
              @id={{concat @id "-telSecondary"}}
              type="tel"
              {{!-- {{on "focusout" (fn @clearValidationError "telephoneSecondary")}} --}}
            />
            {{#if @warningMessage.telephoneSecondary}}
              {{#if (has-block "warning")}}
                {{yield @warningMessage to="warning"}}
              {{else}}
                <AuHelpText
                  @warning={{true}}
                >{{@warningMessage.telephoneSecondary}}</AuHelpText>
              {{/if}}
            {{/if}}
          </:content>
          <:helpText>
            {{help-text "url"}}
          </:helpText>
        </Item>
        <Item
          @labelFor={{concat @id "-emailPrimary"}}
          @errorMessage={{@errorMessage.emailPrimary}}
        >
          <:label>E-mail</:label>
          <:content as |errorMessage|>
            <TrimInput
              @width="block"
              @value={{@primaryContact.email}}
              @onUpdate={{fn (mut @primaryContact.email)}}
              @error={{errorMessage}}
              @id={{concat @id "-emailPrimary"}}
              {{!-- {{on "focusout" (fn @clearValidationError "emailPrimary")}} --}}
            />
          </:content>
          <:helpText>
            {{help-text "email"}}
          </:helpText>
        </Item>
        <Item
          @labelFor={{concat @id "-webPrimary"}}
          @errorMessage={{@errorMessage.websitePrimary}}
        >
          <:label>Website</:label>
          <:content as |hasError|>
            <TrimInput
              @width="block"
              @value={{@primaryContact.website}}
              @onUpdate={{fn (mut @primaryContact.website)}}
              @error={{hasError}}
              @id={{concat @id "-webPrimary"}}
              {{!-- {{on "focusout" (fn @clearValidationError "websitePrimary")}} --}}
            />
          </:content>
          <:helpText>
            {{help-text "url"}}
          </:helpText>
        </Item>
      </:right>
    </Card.Columns>
  </:card>
</EditCard>