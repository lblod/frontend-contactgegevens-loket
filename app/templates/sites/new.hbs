{{breadcrumb "Nieuw"}}
<div class="au-c-body-container au-c-body-container--scroll">
  <div class="au-o-box au-o-flow au-o-flow--large">

    <PageHeader>
      <:title>Voeg vestiging toe</:title>
      <:action>
        <AuButtonGroup class="au-c-button-group--align-right">
          <AuLink @route="sites.index" @skin="button-secondary">
            Annuleer
          </AuLink>
          <AuButton
            @loading={{this.createSite.isRunning}}
            @disabled={{this.createSite.isRunning}}
            @icon="add"
            @iconAlignment="left"
            type="submit"
            form="new-vestiging-form"
          >
            Voeg toe
          </AuButton>
        </AuButtonGroup>
      </:action>
    </PageHeader>

    <form id="new-vestiging-form" {{on "submit" this.createSite}}>
      <div class="au-o-flow au-o-flow--large">
        <EditCard>
          <:title>Kerngegevens</:title>
          <:card as |Card|>
            <Card.Columns>
              <:left as |Item|>
                <Item
                  @labelFor="site-type"
                  @required={{true}}
                  @errorMessage={{this.model.site.error.siteType.validation}}
                >
                  <:label>Type vestiging</:label>
                  <:content as |hasError|>
                    <SiteTypeSelect
                      @selected={{this.model.site.siteType}}
                      @onChange={{fn (mut this.model.site.siteType)}}
                      @administrativeUnitClassification={{this.model.site.siteType.id}}
                      @id="site-type"
                      @error={{hasError}}
                    />
                  </:content>
                </Item>
              </:left>
              <:right as |Item|>
                <Item>
                  <:label>Primair correspondentieadres</:label>
                  <:content>
                    <AuRadioGroup
                      @name="is-primary-site"
                      @alignment="inline"
                      @onChange={{fn (mut this.isPrimarySite)}}
                      @selected={{this.isPrimarySite}}
                      as |Group|
                    >
                      <Group.Radio @value="Ja">Ja</Group.Radio>
                      <Group.Radio @value="Nee">Nee</Group.Radio>
                    </AuRadioGroup>
                  </:content>
                </Item>
              </:right>
            </Card.Columns>
          </:card>
        </EditCard>

        <ContactDataEditCard
          @address={{@model.address}}
          @isAddressSearchEnabledInitially={{if
            (or (not @model.address.id) @model.address.addressRegisterUri)
            true
            false
          }}
          @primaryContact={{@model.primaryContact}}
          @secondaryContact={{@model.secondaryContact}}
        >
          <:title>Contactgegevens</:title>

        </ContactDataEditCard>
      </div>
    </form>
  </div>
</div>